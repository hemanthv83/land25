<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Land Registration Form</title>
    <style>
        /* General Styles */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        }
        
        h1, h2, h3, h4 {
            color: #2c3e50;
            margin-top: 0;
        }
        
        .form-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        input[type="text"], input[type="email"], input[type="tel"], input[type="date"], select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        
        textarea {
            height: 100px;
        }
        
        .button {
            display: inline-block;
            padding: 10px 20px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        .button:hover {
            background-color: #2980b9;
        }
        
        .button.secondary {
            background-color: #95a5a6;
        }
        
        .button.secondary:hover {
            background-color: #7f8c8d;
        }
        
        .button:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }
        
       /* Progress Bar */
.progress-container {
    margin-bottom: 30px;
}

.progress-bar {
    width: 100%;
    background-color: #ecf0f1;
    height: 10px;
    border-radius: 5px;
    margin-bottom: 15px;
}

.progress-bar-fill {
    height: 100%;
    background-color: #3498db;
    border-radius: 5px;
    width: 0%;
    transition: width 0.3s ease-in-out;
}

.progress-steps {
    display: flex;
    justify-content: space-between;
    position: relative;
}

/* This is causing the line over your text */
.progress-steps:first-of-type::before {
    content: '';
    position: absolute;
    top: 15px;
    left: 0;
    right: 0;
    height: 2px;
    background-color: #ddd;
    z-index: 1;
}

/* Add this to make labels have a background */
.step-label {
    background-color: white;
    padding: 0 5px;
    position: relative;
    z-index: 2;
}
        .step {
            width: 30px;
            height: 30px;
            background-color: #ecf0f1;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            position: relative;
            z-index: 2;
            transition: background-color 0.3s;
        }
        
        .step.active {
            background-color: #3498db;
            color: white;
        }
        
        .step.completed {
            background-color: #2ecc71;
            color: white;
        }
        
        .step-label {
            margin-top: 5px;
            font-size: 12px;
            text-align: center;
        }
        
        
        .verification-steps {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }
        
        .verification-step {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #f1f1f1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            position: relative;
        }
        
        .verification-step::before {
            content: '';
            position: absolute;
            top: 50%;
            right: 100%;
            width: 100%;
            height: 2px;
            background-color: #ddd;
            transform: translateY(-50%);
        }
        
        .verification-step:first-child::before {
            display: none;
        }
        
        .step-pending {
            background-color: #f1f1f1;
        }
        
        .step-in-progress {
            background-color: #f39c12;
            color: white;
            animation: spin 1s linear infinite;
        }
        
        .step-complete {
            background-color: #2ecc71;
            color: white;
        }
        
        .step-error {
            background-color: #e74c3c;
            color: white;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Status Indicators */
        .status-pending {
            color: #f39c12;
        }
        
        .status-verified, .status-success {
            color: #2ecc71;
        }
        
        .status-error {
            color: #e74c3c;
        }
        
        /* Biometric Styles */
        .fingerprint-container {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .fingerprint-icon {
            font-size: 60px;
            color: #3498db;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .fingerprint-status {
            margin-top: 10px;
            font-weight: bold;
        }
        
        /* Face Authentication */
        .face-auth-container {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .face-match-indicator {
            margin: 10px 0;
            background-color: #ecf0f1;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .face-match-fill {
            height: 100%;
            background-color: #3498db;
            width: 0%;
            transition: width 0.5s ease-in-out;
        }
        
        /* Video Recording */
        .video-recording-container {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .recording-indicator {
            display: inline-block;
            width: 20px;
            height: 20px;
            background-color: #e74c3c;
            border-radius: 50%;
            margin-right: 10px;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .sentiment-analysis {
            margin-top: 20px;
        }
        
        .sentiment-bar {
            height: 20px;
            background-color: #ecf0f1;
            border-radius: 10px;
            margin-bottom: 10px;
            overflow: hidden;
        }
        
        .sentiment-fill {
            height: 100%;
            width: 0%;
            transition: width 0.5s ease-in-out;
        }
        
        .happy-fill {
            background-color: #2ecc71;
        }
        
        .neutral-fill {
            background-color: #3498db;
        }
        
        .sad-fill {
            background-color: #f39c12;
        }
        
        .angry-fill {
            background-color: #e74c3c;
        }
        
        .sentiment-label {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
        }
        
        .sentiment-summary {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .positive-summary {
            background-color: rgba(46, 204, 113, 0.1);
            color: #27ae60;
        }
        
        .negative-summary {
            background-color: rgba(231, 76, 60, 0.1);
            color: #c0392b;
        }
        
        /* Signature Pad */
        .signature-container {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .signature-pad {
            border: 1px solid #ddd;
            margin-bottom: 10px;
        }
        
        /* Consent Tabs */
        .consent-tabs {
            display: flex;
            margin-bottom: 20px;
        }
        
        .consent-tab {
            padding: 10px 20px;
            background-color: #f1f1f1;
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }
        
        .consent-tab.active {
            background-color: #fff;
            border-bottom: 2px solid #3498db;
        }
        
        .consent-content {
            display: none;
            padding: 20px;
            border: 1px solid #ddd;
            border-top: none;
        }
        
        .consent-content.active {
            display: block;
        }
        
        /* Navigation */
        .form-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .form-section {
                padding: 15px;
            }
            
            .button {
                width: 100%;
                margin-bottom: 10px;
            }
            
            .form-navigation {
                flex-direction: column;
            }
            
            .verification-steps {
                flex-direction: column;
                align-items: center;
            }
            
            .verification-step {
                margin-bottom: 10px;
            }
            
            .verification-step::before {
                width: 2px;
                height: 20px;
                top: 0;
                left: 50%;
                transform: translateX(-50%);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Land Registration Form</h1>
        
        <div class="progress-container">
            <div class="progress-bar">
                <div id="progressBarFill" class="progress-bar-fill"></div>
            </div>
            <div class="progress-steps">
                <div class="step active" id="step1">1</div>
                <div class="step" id="step2">2</div>
                <div class="step" id="step3">3</div>
                <div class="step" id="step4">4</div>
                <div class="step" id="step5">5</div>
            </div>
            <div class="progress-steps">
                <div class="step-label">Identity</div>
                <div class="step-label">Biometric</div>
                <div class="step-label">Property</div>
                <div class="step-label">Verification</div>
                <div class="step-label">Submission</div>
            </div>
        </div>
        
        <form id="landForm">
            <!-- Step 1: Identity Information -->
            <div id="identitySection" class="form-section">
                <h2>Step 1: Identity Information</h2>
                
                <div class="form-group">
                    <label for="fullName">Full Name</label>
                    <input type="text" id="fullName" name="fullName" required>
                </div>
                
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" required>
                </div>
                
                <div class="form-group">
                    <label for="mobile">Mobile Number</label>
                    <input type="tel" id="mobile" name="mobile" required>
                </div>
                
                <div class="form-group">
                    <label for="dob">Date of Birth</label>
                    <input type="date" id="dob" name="dob" required>
                </div>
                
                <div class="form-group">
                    <label for="address">Permanent Address</label>
                    <textarea id="address" name="address" required></textarea>
                </div>
                
                <div class="form-navigation">
                    <div></div>
                    <button type="button" id="identityNextBtn" class="button">Next</button>
                </div>
            </div>
            
            <!-- Step 2: Biometric Verification -->
            <div id="biometricSection" class="form-section" style="display: none;">
                <h2>Step 2: Biometric Verification</h2>
                
                <!-- Aadhaar Verification -->
                <div class="form-group">
                    <h3>Aadhaar Verification</h3>
                    
                    <div class="form-group">
                        <label for="aadhaarNumber">Aadhaar Number</label>
                        <input type="text" id="aadhaarNumber" name="aadhaarNumber" readonly>
                        <div id="aadhaarStatus" class="aadhaar-status status-pending">Awaiting Aadhaar verification</div>
                    </div>
                    
                    <div class="verification-steps">
                        <div id="stepOCR" class="verification-step step-pending">1</div>
                        <div id="stepValidation" class="verification-step step-pending">2</div>
                        <div id="stepVerification" class="verification-step step-pending">3</div>
                    </div>
                    
                    <div class="form-group">
                        <button type="button" id="captureAadhaarBtn" class="button">Capture Aadhaar</button>
                        <button type="button" id="resetAadhaarBtn" class="button secondary">Reset</button>
                    </div>
                    
                    <div id="processingIndicator" style="display: none;">
                        <p>Processing...</p>
                    </div>
                    
                    <!-- Aadhaar Capture Interface -->
                    <div id="aadhaarCaptureInterface" style="display: none; margin: 20px 0; border: 1px solid #ddd; padding: 15px; border-radius: 5px;">
                        <h4>Aadhaar Card Capture</h4>
                        <p>Position your Aadhaar card clearly in the camera view and take a picture.</p>
                        
                        <div class="camera-container" style="margin: 15px 0;">
                            <video id="aadhaarVideo" style="width: 100%; max-width: 500px; border: 1px solid #ccc;" autoplay></video>
                            <canvas id="aadhaarCanvas" style="display: none; width: 100%; max-width: 500px; border: 1px solid #ccc;"></canvas>
                        </div>
                        
                        <div class="camera-controls">
                            <button type="button" id="aadhaarCaptureBtn" class="button" disabled>Capture Image</button>
                            <button type="button" id="aadhaarConfirmBtn" class="button primary-button" style="display: none;">Confirm</button>
                            <button type="button" id="aadhaarRetakeBtn" class="button" style="display: none;">Retake</button>
                        </div>
                    </div>
                </div>
                
                <!-- Fingerprint Scanning -->
                <div class="form-group">
                    <h3>Fingerprint Verification</h3>
                    
                    <div class="fingerprint-container">
                        <div class="fingerprint-icon">ðŸ‘†</div>
                        <div class="form-group">
                            <label>Fingerprint Quality</label>
                            <input type="text" id="fingerprintQuality" readonly>
                        </div>
                        <div id="fingerprintStatus" class="fingerprint-status">Ready to scan</div>
                        <div class="form-group">
                            <button type="button" id="scanFingerprintBtn" class="button">Scan Fingerprint</button>
                        </div>
                    </div>
                </div>
                
                <!-- Face Authentication -->
                <div class="form-group">
                    <h3>Face Authentication</h3>
                    
                    <div class="face-auth-container">
                        <div class="form-group">
                            <label>Face Match</label>
                            <div class="face-match-indicator">
                                <div id="faceMatchIndicator" class="face-match-fill" style="width: 0%;"></div>
                            </div>
                            <div class="face-match-percentage">Match: <span id="faceMatchPercentage">0%</span></div>
                        </div>
                        <div id="faceAuthStatus" class="face-auth-status">Ready to verify</div>
                        <div class="form-group">
                            <button type="button" id="verifyFaceBtn" class="button">Verify Face</button>
                        </div>
                    </div>
                </div>
                
                <div class="form-navigation">
                    <button type="button" id="biometricPrevBtn" class="button secondary">Previous</button>
                    <button type="button" id="biometricNextBtn" class="button">Next</button>
                </div>
            </div>
            
            <!-- Step 3: Property Details -->
            <div id="propertySection" class="form-section" style="display: none;">
                <h2>Step 3: Property Details</h2>
                
                <div class="form-group">
                    <label for="propertyType">Property Type</label>
                    <select id="propertyType" name="propertyType" required>
                        <option value="">Select Property Type</option>
                        <option value="residential">Residential</option>
                        <option value="commercial">Commercial</option>
                        <option value="agricultural">Agricultural</option>
                        <option value="industrial">Industrial</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="propertyAddress">Property Address</label>
                    <textarea id="propertyAddress" name="propertyAddress" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="surveyNumber">Survey Number</label>
                    <input type="text" id="surveyNumber" name="surveyNumber" required>
                </div>
                
                <div class="form-group">
                    <label for="landArea">Land Area (in sq. ft.)</label>
                    <input type="text" id="landArea" name="landArea" required>
                </div>
                
                <div class="form-group">
                    <label for="boundaryDetails">Boundary Details</label>
                    <textarea id="boundaryDetails" name="boundaryDetails" required></textarea>
                </div>
                
                <div class="form-navigation">
                    <button type="button" id="propertyPrevBtn" class="button secondary">Previous</button>
                    <button type="button" id="propertyNextBtn" class="button">Next</button>
                </div>
            </div>
            
            <!-- Step 4: Verification -->
            <div id="verificationSection" class="form-section" style="display: none;">
                <h2>Step 4: Verification</h2>
                
                <!-- Video Recording -->
                <div class="form-group">
                    <h3>Video Verification</h3>
                    
                    <div class="video-recording-container">
                        <div class="form-group">
                            <label>Date and Time</label>
                            <div id="datetime">-</div>
                        </div>
                        
                        <div class="form-group">
                            <label>GPS Location</label>
                            <div id="gpsCoordinates">-</div>
                            <div id="gpsAddress">-</div>
                            <div id="locationStatus" class="location-status">Awaiting location</div>
                        </div>
                        
                        <div class="video-container" style="margin: 15px 0;">
                            <video id="videoPreview" style="width: 100%; max-width: 500px; border: 1px solid #ccc; display: none;" autoplay muted></video>
                            <video id="recordedVideo" style="width: 100%; max-width: 500px; border: 1px solid #ccc; display: none;"></video>
                            <div id="videoStatus" class="video-status">Ready to record</div>
                        </div>
                        
                        <div class="form-group">
                            <button type="button" id="startRecordBtn" class="button">Start Recording</button>
                            <button type="button" id="stopRecordBtn" class="button secondary" disabled>Stop Recording</button>
                            <span id="recordingIndicator" class="recording-indicator" style="display: none;"></span>
                            <span id="recordingTimer">00:00</span>
                        </div>
                        
                        <div class="sentiment-analysis">
                            <h4>Sentiment Analysis</h4>
                            
                            <div class="form-group">
                                <label class="sentiment-label">
                                    <span>Happy</span>
                                    <span id="happyValue">0%</span>
                                </label>
                                <div class="sentiment-bar">
                                    <div id="happyFill" class="sentiment-fill happy-fill" style="width: 0%;"></div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="sentiment-label">
                                    <span>Neutral</span>
                                    <span id="neutralValue">0%</span>
                                </label>
                                <div class="sentiment-bar">
                                    <div id="neutralFill" class="sentiment-fill neutral-fill" style="width: 0%;"></div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="sentiment-label">
                                    <span>Sad</span>
                                    <span id="sadValue">0%</span>
                                </label>
                                <div class="sentiment-bar">
                                    <div id="sadFill" class="sentiment-fill sad-fill" style="width: 0%;"></div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="sentiment-label">
                                    <span>Angry</span>
                                    <span id="angryValue">0%</span>
                                </label>
                                <div class="sentiment-bar">
                                    <div id="angryFill" class="sentiment-fill angry-fill" style="width: 0%;"></div>
                                </div>
                            </div>
                            
                            <div id="sentimentSummary" class="sentiment-summary">No data available</div>
                        </div>
                    </div>
                </div>
                
                <div class="form-navigation">
                    <button type="button" id="verificationPrevBtn" class="button secondary">Previous</button>
                    <button type="button" id="verificationNextBtn" class="button">Next</button>
                </div>
            </div>
            
            <!-- Step 5: Submit -->
            <div id="submissionSection" class="form-section" style="display: none;">
                <h2>Step 5: Final Submission</h2>
                
                <!-- Consent Tabs -->
                <div class="form-group">
                    <h3>Terms and Conditions</h3>
                    
                    <div class="consent-tabs">
                        <div class="consent-tab active" data-tab="terms">Terms</div>
                        <div class="consent-tab" data-tab="privacy">Privacy</div>
                        <div class="consent-tab" data-tab="declaration">Declaration</div>
                    </div>
                    
                    <div class="consent-content active" id="termsContent">
                        <p>By submitting this form, you agree to the following terms and conditions:</p>
                        <ul>
                            <li>All information provided is true and accurate.</li>
                            <li>You have legal rights to register this property.</li>
                            <li>You consent to verification of your identity and property details.</li>
                            <li>You agree to pay all applicable fees and taxes.</li>
                        </ul>
                    </div>
                    
                    <div class="consent-content" id="privacyContent">
                        <p>We collect and process your personal data in accordance with our privacy policy:</p>
                        <ul>
                            <li>Your personal information will be used for property registration purposes only.</li>
                            <li>Biometric data will be stored securely and used only for verification.</li>
                            <li>Your data may be shared with relevant government departments.</li>
                            <li>You have the right to access, correct, or delete your personal data.</li>
                        </ul>
                    </div>
                    
                    <div class="consent-content" id="declarationContent">
                        <p>I hereby declare that:</p>
                        <ul>
                            <li>I am the legal owner or authorized representative of the property.</li>
                            <li>All documents submitted are authentic and valid.</li>
                            <li>I have paid all dues and taxes related to the property.</li>
                            <li>There are no pending legal disputes regarding the property.</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Signature -->
                <div class="form-group">
                    <h3>Digital Signature</h3>
                    
                    <div class="signature-container">
                        <p>Please sign below to complete your registration:</p>
                        <canvas id="signatureCanvas" class="signature-pad"></canvas>
                        <button type="button" id="clearSignature" class="button secondary">Clear Signature</button>
                    </div>
                </div>
                
                <!-- Final Confirmation -->
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="finalConfirmation" required>
                        I confirm that all information provided is true and accurate, and I agree to the terms and conditions.
                    </label>
                </div>
                
                <div class="form-navigation">
                    <button type="button" id="submissionPrevBtn" class="button secondary">Previous</button>
                    <button type="submit" class="button">Submit Registration</button>
                </div>
            </div>
        </form>
    </div>

    <script>
        // Form Navigation Controls
        document.addEventListener('DOMContentLoaded', function() {
            // Step navigation
            const sections = ['identitySection', 'biometricSection', 'propertySection', 'verificationSection', 'submissionSection'];
            const steps = ['step1', 'step2', 'step3', 'step4', 'step5'];
            let currentStep = 0;
            
            // Update progress bar
            function updateProgress() {
                const progress = (currentStep / (sections.length - 1)) * 100;
                document.getElementById('progressBarFill').style.width = progress + '%';
                
                // Update steps
                steps.forEach((step, index) => {
                    const stepElement = document.getElementById(step);
                    if (index < currentStep) {
                        stepElement.classList.remove('active');
                        stepElement.classList.add('completed');
                    } else if (index === currentStep) {
                        stepElement.classList.add('active');
                        stepElement.classList.remove('completed');
                    } else {
                        stepElement.classList.remove('active');
                        stepElement.classList.remove('completed');
                    }
                });
            }
            
            // Show section
            function showSection(index) {
                sections.forEach((sectionId, i) => {
                    document.getElementById(sectionId).style.display = i === index ? 'block' : 'none';
                });
                currentStep = index;
                updateProgress();
                window.scrollTo(0, 0);
            }
            
            // Next buttons
            document.getElementById('identityNextBtn').addEventListener('click', () => showSection(1));
            document.getElementById('biometricNextBtn').addEventListener('click', () => showSection(2));
            document.getElementById('propertyNextBtn').addEventListener('click', () => showSection(3));
            document.getElementById('verificationNextBtn').addEventListener('click', () => showSection(4));
            
            // Previous buttons
            document.getElementById('biometricPrevBtn').addEventListener('click', () => showSection(0));
            document.getElementById('propertyPrevBtn').addEventListener('click', () => showSection(1));
            document.getElementById('verificationPrevBtn').addEventListener('click', () => showSection(2));
            document.getElementById('submissionPrevBtn').addEventListener('click', () => showSection(3));
            
            // Consent tabs functionality
            const consentTabs = document.querySelectorAll('.consent-tab');
            consentTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remove active class from all tabs and contents
                    document.querySelectorAll('.consent-tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.consent-content').forEach(c => c.classList.remove('active'));
                    
                    // Add active class to selected tab and content
                    this.classList.ad
                    // Continuation of the script section...

                    // Add active class to selected tab and content
                    this.classList.add('active');
                    document.getElementById(this.getAttribute('data-tab') + 'Content').classList.add('active');
                });
            });
            
            // Aadhaar Verification
            document.getElementById('captureAadhaarBtn').addEventListener('click', function() {
                const captureInterface = document.getElementById('aadhaarCaptureInterface');
                captureInterface.style.display = 'block';
                this.disabled = true;
                
                // Set up camera
                const video = document.getElementById('aadhaarVideo');
                const captureBtn = document.getElementById('aadhaarCaptureBtn');
                
                navigator.mediaDevices.getUserMedia({ video: true })
                    .then(stream => {
                        video.srcObject = stream;
                        captureBtn.disabled = false;
                    })
                    .catch(err => {
                        console.error('Camera access error:', err);
                        alert('Unable to access camera. Please ensure you have given permission.');
                    });
            });
            
            // Aadhaar Capture
            document.getElementById('aadhaarCaptureBtn').addEventListener('click', function() {
                const video = document.getElementById('aadhaarVideo');
                const canvas = document.getElementById('aadhaarCanvas');
                const context = canvas.getContext('2d');
                
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                context.drawImage(video, 0, 0, canvas.width, canvas.height);
                
                // Show canvas and controls
                canvas.style.display = 'block';
                video.style.display = 'none';
                document.getElementById('aadhaarConfirmBtn').style.display = 'inline-block';
                document.getElementById('aadhaarRetakeBtn').style.display = 'inline-block';
                this.style.display = 'none';
            });
            
            // Aadhaar Retake
            document.getElementById('aadhaarRetakeBtn').addEventListener('click', function() {
                const video = document.getElementById('aadhaarVideo');
                const canvas = document.getElementById('aadhaarCanvas');
                
                canvas.style.display = 'none';
                video.style.display = 'block';
                document.getElementById('aadhaarCaptureBtn').style.display = 'inline-block';
                document.getElementById('aadhaarConfirmBtn').style.display = 'none';
                this.style.display = 'none';
            });
            
            // Aadhaar Confirm
            document.getElementById('aadhaarConfirmBtn').addEventListener('click', function() {
                // Process the Aadhaar image
                document.getElementById('processingIndicator').style.display = 'block';
                
                // Simulate OCR processing
                setTimeout(() => {
                    document.getElementById('stepOCR').className = 'verification-step step-complete';
                    
                    // Simulate validation
                    setTimeout(() => {
                        document.getElementById('stepValidation').className = 'verification-step step-complete';
                        
                        // Simulate verification
                        setTimeout(() => {
                            document.getElementById('stepVerification').className = 'verification-step step-complete';
                            document.getElementById('aadhaarNumber').value = 'XXXX XXXX 1234';
                            document.getElementById('aadhaarStatus').className = 'aadhaar-status status-verified';
                            document.getElementById('aadhaarStatus').textContent = 'Verified Successfully';
                            document.getElementById('processingIndicator').style.display = 'none';
                            
                            // Close the camera
                            const video = document.getElementById('aadhaarVideo');
                            if (video.srcObject) {
                                video.srcObject.getTracks().forEach(track => track.stop());
                            }
                            
                            document.getElementById('aadhaarCaptureInterface').style.display = 'none';
                            document.getElementById('captureAadhaarBtn').disabled = false;
                        }, 1000);
                    }, 1000);
                }, 1000);
            });
            
            // Reset Aadhaar
            document.getElementById('resetAadhaarBtn').addEventListener('click', function() {
                document.getElementById('aadhaarNumber').value = '';
                document.getElementById('aadhaarStatus').className = 'aadhaar-status status-pending';
                document.getElementById('aadhaarStatus').textContent = 'Awaiting Aadhaar verification';
                document.getElementById('stepOCR').className = 'verification-step step-pending';
                document.getElementById('stepValidation').className = 'verification-step step-pending';
                document.getElementById('stepVerification').className = 'verification-step step-pending';
                
                // Close the camera if open
                const video = document.getElementById('aadhaarVideo');
                if (video.srcObject) {
                    video.srcObject.getTracks().forEach(track => track.stop());
                }
                
                document.getElementById('aadhaarCaptureInterface').style.display = 'none';
                document.getElementById('captureAadhaarBtn').disabled = false;
            });
            
            // Fingerprint Scan
            document.getElementById('scanFingerprintBtn').addEventListener('click', function() {
                const fingerprintStatus = document.getElementById('fingerprintStatus');
                fingerprintStatus.textContent = 'Scanning...';
                
                // Simulate scanning process
                setTimeout(() => {
                    document.getElementById('fingerprintQuality').value = '87%';
                    fingerprintStatus.textContent = 'Scan complete. Quality: Good';
                    fingerprintStatus.className = 'fingerprint-status status-verified';
                }, 2000);
            });
            
            // Face Authentication
            document.getElementById('verifyFaceBtn').addEventListener('click', function() {
                const faceAuthStatus = document.getElementById('faceAuthStatus');
                faceAuthStatus.textContent = 'Verifying...';
                
                // Animate face match indicator
                const matchIndicator = document.getElementById('faceMatchIndicator');
                const matchPercentage = document.getElementById('faceMatchPercentage');
                let width = 0;
                const interval = setInterval(() => {
                    if (width >= 95) {
                        clearInterval(interval);
                        faceAuthStatus.textContent = 'Face verified successfully';
                        faceAuthStatus.className = 'face-auth-status status-verified';
                    } else {
                        width += 5;
                        matchIndicator.style.width = width + '%';
                        matchPercentage.textContent = width + '%';
                    }
                }, 100);
            });
            
            // Video recording
            let mediaRecorder;
            let recordedChunks = [];
            let recordingInterval;
            let recordingSeconds = 0;
            
            document.getElementById('startRecordBtn').addEventListener('click', function() {
                const videoPreview = document.getElementById('videoPreview');
                const recordedVideo = document.getElementById('recordedVideo');
                const videoStatus = document.getElementById('videoStatus');
                const recordingIndicator = document.getElementById('recordingIndicator');
                const recordingTimer = document.getElementById('recordingTimer');
                
                videoPreview.style.display = 'block';
                recordedVideo.style.display = 'none';
                videoStatus.textContent = 'Initializing camera...';
                
                // Set datetime
                const now = new Date();
                document.getElementById('datetime').textContent = now.toLocaleString();
                
                // Set GPS location (simulated)
                setTimeout(() => {
                    document.getElementById('gpsCoordinates').textContent = '12.9716Â° N, 77.5946Â° E';
                    document.getElementById('gpsAddress').textContent = 'Bangalore, Karnataka, India';
                    document.getElementById('locationStatus').textContent = 'Location verified';
                    document.getElementById('locationStatus').className = 'location-status status-verified';
                }, 1000);
                
                // Start camera
                navigator.mediaDevices.getUserMedia({ video: true, audio: true })
                    .then(stream => {
                        videoPreview.srcObject = stream;
                        mediaRecorder = new MediaRecorder(stream);
                        
                        mediaRecorder.ondataavailable = function(e) {
                            if (e.data.size > 0) {
                                recordedChunks.push(e.data);
                            }
                        };
                        
                        mediaRecorder.onstop = function() {
                            const blob = new Blob(recordedChunks, { type: 'video/webm' });
                            recordedVideo.src = URL.createObjectURL(blob);
                            recordedVideo.style.display = 'block';
                            videoPreview.style.display = 'none';
                            
                            // Stop tracks
                            videoPreview.srcObject.getTracks().forEach(track => track.stop());
                            
                            // Simulate sentiment analysis
                            simulateSentimentAnalysis();
                        };
                        
                        videoStatus.textContent = 'Ready to record';
                        document.getElementById('startRecordBtn').disabled = true;
                        document.getElementById('stopRecordBtn').disabled = false;
                    })
                    .catch(err => {
                        console.error('Camera access error:', err);
                        alert('Unable to access camera. Please ensure you have given permission.');
                    });
            });
            
            document.getElementById('stopRecordBtn').addEventListener('click', function() {
                if (mediaRecorder && mediaRecorder.state !== 'inactive') {
                    mediaRecorder.stop();
                    document.getElementById('recordingIndicator').style.display = 'none';
                    document.getElementById('videoStatus').textContent = 'Recording complete';
                    this.disabled = true;
                    document.getElementById('startRecordBtn').disabled = false;
                    
                    // Clear recording timer
                    clearInterval(recordingInterval);
                    recordingSeconds = 0;
                }
            });
            
            function startRecording() {
                recordedChunks = [];
                recordingSeconds = 0;
                document.getElementById('recordingTimer').textContent = '00:00';
                document.getElementById('recordingIndicator').style.display = 'inline-block';
                document.getElementById('videoStatus').textContent = 'Recording...';
                
                mediaRecorder.start(1000);
                
                // Update recording timer
                recordingInterval = setInterval(() => {
                    recordingSeconds++;
                    const minutes = Math.floor(recordingSeconds / 60);
                    const seconds = recordingSeconds % 60;
                    document.getElementById('recordingTimer').textContent = 
                        `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }, 1000);
            }
            
            function simulateSentimentAnalysis() {
                // Simulate sentiment values
                const happyValue = Math.floor(Math.random() * 40) + 60; // 60-100%
                const neutralValue = Math.floor(Math.random() * 30) + 10; // 10-40%
                const sadValue = Math.floor(Math.random() * 20); // 0-20%
                const angryValue = Math.floor(Math.random() * 10); // 0-10%
                
                // Update sentiment bars
                document.getElementById('happyFill').style.width = happyValue + '%';
                document.getElementById('neutralFill').style.width = neutralValue + '%';
                document.getElementById('sadFill').style.width = sadValue + '%';
                document.getElementById('angryFill').style.width = angryValue + '%';
                
                // Update sentiment values
                document.getElementById('happyValue').textContent = happyValue + '%';
                document.getElementById('neutralValue').textContent = neutralValue + '%';
                document.getElementById('sadValue').textContent = sadValue + '%';
                document.getElementById('angryValue').textContent = angryValue + '%';
                
                // Update sentiment summary
                const sentimentSummary = document.getElementById('sentimentSummary');
                sentimentSummary.textContent = 'Positive sentiment detected. Verification successful.';
                sentimentSummary.className = 'sentiment-summary positive-summary';
            }
            
            // Signature pad
            const signatureCanvas = document.getElementById('signatureCanvas');
            const signatureCtx = signatureCanvas.getContext('2d');
            let isDrawing = false;
            
            // Set canvas size
            signatureCanvas.width = signatureCanvas.offsetWidth;
            signatureCanvas.height = 150;
            
            // Initialize signature pad
            signatureCtx.lineWidth = 2;
            signatureCtx.lineCap = 'round';
            signatureCtx.strokeStyle = '#000';
            
            // Event listeners for signature pad
            signatureCanvas.addEventListener('mousedown', startDrawing);
            signatureCanvas.addEventListener('mousemove', draw);
            signatureCanvas.addEventListener('mouseup', stopDrawing);
            signatureCanvas.addEventListener('mouseout', stopDrawing);
            
            // Touch events
            signatureCanvas.addEventListener('touchstart', startDrawingTouch);
            signatureCanvas.addEventListener('touchmove', drawTouch);
            signatureCanvas.addEventListener('touchend', stopDrawing);
            
            function startDrawing(e) {
                isDrawing = true;
                signatureCtx.beginPath();
                signatureCtx.moveTo(e.offsetX, e.offsetY);
            }
            
            function draw(e) {
                if (!isDrawing) return;
                signatureCtx.lineTo(e.offsetX, e.offsetY);
                signatureCtx.stroke();
            }
            
            function startDrawingTouch(e) {
                e.preventDefault();
                isDrawing = true;
                const rect = signatureCanvas.getBoundingClientRect();
                const touch = e.touches[0];
                const x = touch.clientX - rect.left;
                const y = touch.clientY - rect.top;
                signatureCtx.beginPath();
                signatureCtx.moveTo(x, y);
            }
            
            function drawTouch(e) {
                if (!isDrawing) return;
                e.preventDefault();
                const rect = signatureCanvas.getBoundingClientRect();
                const touch = e.touches[0];
                const x = touch.clientX - rect.left;
                const y = touch.clientY - rect.top;
                signatureCtx.lineTo(x, y);
                signatureCtx.stroke();
            }
            
            function stopDrawing() {
                isDrawing = false;
            }
            
            // Clear signature
            document.getElementById('clearSignature').addEventListener('click', function() {
                signatureCtx.clearRect(0, 0, signatureCanvas.width, signatureCanvas.height);
            });
            
            // Form submission
            document.getElementById('landForm').addEventListener('submit', function(e) {
                e.preventDefault();
                alert('Form submitted successfully! Your registration will be processed shortly.');
                // Here you would typically send the form data to a server
            });
            
            // Initialize first section
            showSection(0);
        });
        // Form Navigation Controls with Validation
document.addEventListener('DOMContentLoaded', function() {
    // Step navigation
    const sections = ['identitySection', 'biometricSection', 'propertySection', 'verificationSection', 'submissionSection'];
    const steps = ['step1', 'step2', 'step3', 'step4', 'step5'];
    let currentStep = 0;
    
    // Update progress bar
    function updateProgress() {
        const progress = (currentStep / (sections.length - 1)) * 100;
        document.getElementById('progressBarFill').style.width = progress + '%';
        
        // Update steps
        steps.forEach((step, index) => {
            const stepElement = document.getElementById(step);
            if (index < currentStep) {
                stepElement.classList.remove('active');
                stepElement.classList.add('completed');
            } else if (index === currentStep) {
                stepElement.classList.add('active');
                stepElement.classList.remove('completed');
            } else {
                stepElement.classList.remove('active');
                stepElement.classList.remove('completed');
            }
        });
    }
    
    // Show section
    function showSection(index) {
        sections.forEach((sectionId, i) => {
            document.getElementById(sectionId).style.display = i === index ? 'block' : 'none';
        });
        currentStep = index;
        updateProgress();
        window.scrollTo(0, 0);
    }
    
    // Validate Identity Section
    function validateIdentitySection() {
        const fullName = document.getElementById('fullName').value.trim();
        const email = document.getElementById('email').value.trim();
        const mobile = document.getElementById('mobile').value.trim();
        const dob = document.getElementById('dob').value.trim();
        const address = document.getElementById('address').value.trim();
        
        if (!fullName) {
            alert('Please enter your full name');
            return false;
        }
        if (!email) {
            alert('Please enter your email address');
            return false;
        }
        if (!mobile) {
            alert('Please enter your mobile number');
            return false;
        }
        if (!dob) {
            alert('Please enter your date of birth');
            return false;
        }
        if (!address) {
            alert('Please enter your permanent address');
            return false;
        }
        
        return true;
    }
    
    // Validate Biometric Section
    function validateBiometricSection() {
        const aadhaarNumber = document.getElementById('aadhaarNumber').value.trim();
        const fingerprintQuality = document.getElementById('fingerprintQuality').value.trim();
        const faceMatchPercentage = document.getElementById('faceMatchPercentage').textContent;
        
        if (!aadhaarNumber) {
            alert('Please complete Aadhaar verification');
            return false;
        }
        if (!fingerprintQuality) {
            alert('Please complete fingerprint verification');
            return false;
        }
        if (faceMatchPercentage === '0%') {
            alert('Please complete face verification');
            return false;
        }
        
        return true;
    }
    
    // Validate Property Section
    function validatePropertySection() {
        const propertyType = document.getElementById('propertyType').value;
        const propertyAddress = document.getElementById('propertyAddress').value.trim();
        const surveyNumber = document.getElementById('surveyNumber').value.trim();
        const landArea = document.getElementById('landArea').value.trim();
        const boundaryDetails = document.getElementById('boundaryDetails').value.trim();
        
        if (!propertyType) {
            alert('Please select a property type');
            return false;
        }
        if (!propertyAddress) {
            alert('Please enter the property address');
            return false;
        }
        if (!surveyNumber) {
            alert('Please enter the survey number');
            return false;
        }
        if (!landArea) {
            alert('Please enter the land area');
            return false;
        }
        if (!boundaryDetails) {
            alert('Please enter boundary details');
            return false;
        }
        
        return true;
    }
    
    // Validate Verification Section
    function validateVerificationSection() {
        const recordedVideo = document.getElementById('recordedVideo');
        const sentimentSummary = document.getElementById('sentimentSummary').textContent;
        
        if (recordedVideo.style.display !== 'block') {
            alert('Please complete the video recording');
            return false;
        }
        if (sentimentSummary === 'No data available') {
            alert('Please complete the verification process');
            return false;
        }
        
        return true;
    }
    
    // Validate Submission Section
    function validateSubmissionSection() {
        const finalConfirmation = document.getElementById('finalConfirmation').checked;
        const signatureCanvas = document.getElementById('signatureCanvas');
        const signatureCtx = signatureCanvas.getContext('2d');
        
        // Check if signature exists by getting image data
        const imageData = signatureCtx.getImageData(0, 0, signatureCanvas.width, signatureCanvas.height).data;
        const hasSignature = imageData.some(channel => channel !== 0);
        
        if (!hasSignature) {
            alert('Please provide your signature');
            return false;
        }
        if (!finalConfirmation) {
            alert('Please confirm that all information is accurate by checking the box');
            return false;
        }
        
        return true;
    }
    
    // Next buttons with validation
    document.getElementById('identityNextBtn').addEventListener('click', function() {
        if (validateIdentitySection()) {
            showSection(1);
        }
    });
    
    document.getElementById('biometricNextBtn').addEventListener('click', function() {
        if (validateBiometricSection()) {
            showSection(2);
        }
    });
    
    document.getElementById('propertyNextBtn').addEventListener('click', function() {
        if (validatePropertySection()) {
            showSection(3);
        }
    });
    
    document.getElementById('verificationNextBtn').addEventListener('click', function() {
        if (validateVerificationSection()) {
            showSection(4);
        }
    });
    
    // Previous buttons (no validation needed to go back)
    document.getElementById('biometricPrevBtn').addEventListener('click', () => showSection(0));
    document.getElementById('propertyPrevBtn').addEventListener('click', () => showSection(1));
    document.getElementById('verificationPrevBtn').addEventListener('click', () => showSection(2));
    document.getElementById('submissionPrevBtn').addEventListener('click', () => showSection(3));
    
    // Form submission with validation
    document.getElementById('landForm').addEventListener('submit', function(e) {
        e.preventDefault();
        if (validateSubmissionSection()) {
            alert('Form submitted successfully! Your registration will be processed shortly.');
            // Here you would typically send the form data to a server
        }
    });

    // The rest of your existing code for consent tabs, Aadhaar verification, fingerprint scanning, etc.
    // ...

    // Initialize first section
    showSection(0);
});
    </script>
    
</body>
</html>
